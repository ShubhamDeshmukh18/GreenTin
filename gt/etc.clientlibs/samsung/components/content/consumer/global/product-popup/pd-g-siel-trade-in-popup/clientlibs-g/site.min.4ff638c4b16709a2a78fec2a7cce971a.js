var sielTradeIn={};
(function(b){function k(a){var d=document.querySelectorAll(".siel-trade-in-popup-option");if("all"==a){b("#pincode").val("");m=0;B=!1;b(".siel-trade-in-popup-option__type-guide").removeClass("show");b(".siel-trade-in-popup__disclaimer-wrap").removeClass("show");b("input[name$\x3d'-type']").prop("checked",!1);t=r=!1;for(var c=0;c<d.length;c++)d[c].classList.remove("show");l.removeClass("error");l.removeClass("success");n.addClass("cta--disabled");b(".siel-trade-in-popup__btn-order").addClass("cta--disabled")}if("pincode"==a){m=
0;B=!1;b(".siel-trade-in-popup-option__type-guide").removeClass("show");b(".siel-trade-in-popup__disclaimer-wrap").removeClass("show");b("input[name$\x3d'-type']").prop("checked",!1);t=r=!1;for(c=0;c<d.length;c++)d[c].classList.remove("show");l.removeClass("error");l.removeClass("success");n.addClass("cta--disabled");b(".siel-trade-in-popup__btn-order").addClass("cta--disabled")}}function H(){if(0==m)y=!0;else if(1==m){if(b("input[name\x3d'product-type']").is(":checked")){y=!0;for(var a=b("input[name\x3d'product-type']"),
d="",c=0;c<a.length;c++)"TV"==a[c].value&&(d="#"+a[c].id);b(d).is(":checked")&&(r=!0)}}else 2==m?b("input[name\x3d'model-type']").is(":checked")&&(y=!0,r||(m+=1)):3==m?b("input[name\x3d'size-type']").is(":checked")&&(y=!0):4==m&&b("input[name\x3d'brand-type']").is(":checked")&&(y=!0);y&&(a=document.querySelectorAll(".siel-trade-in-popup-option"),a[m].classList.add("show"),m+=1,a.length-1==m&&(m=0,t=!0,b(".siel-trade-in-popup-option__type-guide").addClass("show"),b(".siel-trade-in-popup__disclaimer-wrap").addClass("show"),
v=Granite.I18n.get(w+"_"+p+"_Text"),b(".siel-trade-in-popup-option__condition-check-desc-excellent").text(v),b(".siel-trade-in-popup-option__condition-check-desc-good").text(v),b(".siel-trade-in-popup-option__condition-check-desc-average").text(v)),y=!1)}function I(){A=b("#shopSKU").val();l.removeClass("error");l.removeClass("success");if(0===u.length||6>u.length)return k("pincode"),g="Please enter a valid Pincode",b(".text-field-v2__text.error").text(g),l.addClass("error"),!1;var a={sku:A,postal_code:u},
d={postal_code:u,skus:A};"true"===b("#isEppPage").val()&&(d.store_id=b("#eppCompanyCode").val());b.ajax({url:C+"/v4/configurator/serviceability",type:"GET",dataType:"json",timeout:2E4,crossDomain:!0,xhrFields:{withCredentials:!0},async:!0,contentType:"application/json",data:d,success:function(c,d,e){200==e.status?c=c.filter(function(d){d.external_attributes.local_dealers[0].serviceable?J(c,a):(k("pincode"),g="Exchange not available in your area",b(".text-field-v2__text.error").text(g),l.addClass("error"))}):
(k("pincode"),g="Exchange not available in your area",b(".text-field-v2__text.error").text(g),l.addClass("error"))},error:function(a){k("pincode");g="Exchange not available in your area";b(".text-field-v2__text.error").text(g);l.addClass("error")}});return!0}function J(a,d){"true"===b("#isEppPage").val()&&(d.store_id=b("#eppCompanyCode").val());b.ajax({headers:E,url:C+"/v1/exchange/offers",type:"POST",dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0,async:!0,timeout:1E4,data:JSON.stringify(d),
success:function(a){0<a.length?(F=a,K()):(k("pincode"),g="Exchange not available in your area",b(".text-field-v2__text.error").text(g),l.addClass("error"))},error:function(a){k("pincode");g=a.responseJSON.message;b(".text-field-v2__text.error").text(g);l.addClass("error")}})}function K(){for(var a=[],d=0;d<F.length;d++)a.push(F[d].offer_id);a={postal_code:u,offer_ids:a,sku:A};"undefined"!==typeof G&&""!==G&&(a.store_id=G);"true"===b("#isEppPage").val()&&(a.store_id=b("#eppCompanyCode").val());b.ajax({headers:E,
url:C+"/v1/exchange/device-offers",type:"POST",dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0,async:!0,timeout:1E4,data:JSON.stringify(a),success:function(a){l.addClass("success");0==B&&(B=!0,H());if(null!=a){if(a=a.filter(function(a){return!0}),L(a),a="",0<e.category.length){var c=[];c=e.category.split(",");for(var d=0;d<c.length;d++){var f="";"Television"==c[d]?f="TV":"Washing Machine"==c[d]?f="WM":"Refrigerator"==c[d]?f="Ref":"Air Conditioner"==c[d]&&(f="AC");a+='\x3cli class\x3d"siel-trade-in-popup-option__item" role\x3d"listitem"\x3e\x3cdiv class\x3d"siel-trade-in-popup-selector"\x3e\x3cinput class\x3d"hidden" type\x3d"radio" name\x3d"product-type" id\x3d"product-type-'+
d+'" value\x3d"'+f+'"\x3e\x3clabel class\x3d"siel-trade-in-popup-selector__label" for\x3d"product-type-'+d+'"\x3e\x3cspan class\x3d"siel-trade-in-popup-selector__text-wrap"\x3e\x3cspan class\x3d"siel-trade-in-popup-selector__text"\x3e'+c[d]+"\x3c/span\x3e\x3c/span\x3e\x3c/label\x3e\x3c/div\x3e\x3c/li\x3e"}b(".siel-trade-in-popup-option__list--product-type").html(a);setTimeout(function(){window.sg.components.sielTradeInPopup.resizePopup();window.sg.components.sielTradeInPopup.goScroll(0)},500)}}else k("pincode"),
g="Exchange Device Details cannot be found",b(".text-field-v2__text.error").text(g),l.addClass("error")},error:function(a){k("pincode");g=a.responseJSON.message;b(".text-field-v2__text.error").text(g);l.addClass("error")}})}function M(){var a={device_id:f.id,device_info:{product_condition:b(".radio-v2.active").children("input").val().toLowerCase()},offer_id:f.offer_id,postal_code:u,sku:A};"true"===b("#isEppPage").val()&&(a.store_id=b("#eppCompanyCode").val());b.ajax({headers:E,url:C+"/v1/exchange",
type:"POST",dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0,async:!0,timeout:1E4,data:JSON.stringify(a),success:function(a){null!=a&&a!==[]&&(window.sg.components.dynamic.DetailAfterEvent.offerAndAddonsDiscount(a,"exchange"),window.sg.components.sielTradeInPopup.closePopup())},error:function(a){},complete:function(){}})}function L(a){e={category:""};for(var b=[],c=0;c<a.length;c++)b.push(a[c]);if(0<b.length)for(a=0;a<b.length;a++){c=b[a].category;var f=b[a].series,h=b[a].variant,g=b[a].brand;
null!=b[a].category&&(null==e[c]&&(e[c]=[]),""===e.category?0>e.category.indexOf(c)&&(e.category=c):0>e.category.indexOf(c)&&(e.category=e.category+","+c),null==e[c][f]&&(e[c][f]=[]),e[c][f].push(b[a]),null==e[c].series?e[c].series=f:0>e[c].series.indexOf(f)&&(e[c].series=e[c].series+","+f),null==e[c][h]&&(e[c][h]=[]),e[c][h].push(b[a]),null==e[c].variant?e[c].variant=h:0>e[c].variant.indexOf(h)&&(e[c].variant=e[c].variant+","+h),null==e[c][g]&&(e[c][g]=[]),e[c][g].push(b[a]),null==e[c].brand?e[c].brand=
g:0>e[c].brand.indexOf(g)&&(e[c].brand=e[c].brand+","+g))}}var C=b("#storeDomain").val(),G=b("#companyCode").val(),e={},F=[],l=b(".siel-trade-in-popup").find(".text-field-v2"),n=b("#pincodeApplyBtn"),u="",B=!1,A="",g="";b("#multiLanguageYn").val();b("#localLang").val();var E={"Cache-Control":"no-cache","Content-Type":"application/json","Access-Control-Allow-Origin":"*"},y=!1,m=0,w="",h="",x="",p=b("#condition-radio-2").val(),z="",q="",f=null,D={};b("#priceCurrency").val();var v="",r=!1,t=!1;b(document).on("change keyup paste",
"#pincode",function(a){k("pincode");u=b(this).val();b(this).val(u.replace(/[^0-9]/g,""));0<u.length?(n.removeClass("cta--disabled"),13===a.keyCode&&(I(),n.addClass("cta--disabled"))):n.addClass("cta--disabled")});b(document).on("click",".siel-trade-in-popup .text-field-v2__input-icon .icon",function(){var a=b(this).parent().find("input");null!=a&&"pincode"===a.attr("id")&&n.addClass("cta--disabled");k("all")});b(document).on("click",".siel-trade-in-popup__close",function(){k("all");n.addClass("cta--disabled")});
b(document).on("click",".siel-trade-in-popup__btn-cancel",function(){k("all");n.addClass("cta--disabled")});b(document).on("click","#pincodeApplyBtn",function(){I();n.addClass("cta--disabled")});b(document).on("click","input[name$\x3d'-type']",function(){var a=b(this).attr("name");b("input[name\x3d'"+a+"']").prop("checked",!1);b(this).prop("checked",!0);if("product-type"==b(this).attr("name")){b(this).prop("checked")&&(w=b(this).val());q=z=x="";r="TV"==b(this).val()?!0:!1;var d=document.querySelectorAll(".siel-trade-in-popup-option");
if(1<m&&b(d).hasClass("show"))for(a=m=2;a<d.length;a++)d[a].classList.remove("show");else if(t&&b(d).hasClass("show")){t=!1;for(a=m=2;a<d.length;a++)d[a].classList.remove("show");b(".siel-trade-in-popup__disclaimer-wrap").removeClass("show")}b.each(b("input[name\x3d'product-type']"),function(){b(this).prop("checked")&&(w=b(this).val());"TV"==w?h="Television":"WM"==w?h="Washing Machine":"AC"==w?h="Air Conditioner":"Ref"==w&&(h="Refrigerator");var a="";if(0<e[h].series.length){var c=e[h].series.split(",");
for(var d=0;d<c.length;d++)a+='\x3cli class\x3d"siel-trade-in-popup-option__item" role\x3d"listitem"\x3e\x3cdiv class\x3d"siel-trade-in-popup-selector"\x3e\x3cinput class\x3d"hidden" type\x3d"radio" name\x3d"model-type" id\x3d"model-type-'+d+'" value\x3d"'+c[d]+'"\x3e\x3clabel class\x3d"siel-trade-in-popup-selector__label" for\x3d"model-type-'+d+'"\x3e\x3cspan class\x3d"siel-trade-in-popup-selector__text-wrap"\x3e\x3cspan class\x3d"siel-trade-in-popup-selector__text"\x3e'+c[d]+"\x3c/span\x3e\x3c/span\x3e\x3c/label\x3e\x3c/div\x3e\x3c/li\x3e";
b(".siel-trade-in-popup-option__list--model-type").html(a)}});setTimeout(function(){window.sg.components.sielTradeInPopup.resizePopup();window.sg.components.sielTradeInPopup.goScroll(1)},500)}if("model-type"==b(this).attr("name"))if(t=!1,b(this).prop("checked")&&(x=b(this).val()),q=z="",r){if(d="",0<e[h].variant.length){a=e[h].variant.split(",");var c=[];c=a;for(a=0;a<c.length;a++)d+='\x3cli class\x3d"siel-trade-in-popup-option__item" role\x3d"listitem"\x3e\x3cdiv class\x3d"siel-trade-in-popup-selector"\x3e\x3cinput class\x3d"hidden" type\x3d"radio" name\x3d"size-type" id\x3d"size-type-'+
a+'" value\x3d"'+c[a]+'"\x3e\x3clabel class\x3d"siel-trade-in-popup-selector__label" for\x3d"size-type-'+a+'"\x3e\x3cspan class\x3d"siel-trade-in-popup-selector__text-wrap"\x3e\x3cspan class\x3d"siel-trade-in-popup-selector__text"\x3e'+c[a]+"\x3c/span\x3e\x3c/span\x3e\x3c/label\x3e\x3c/div\x3e\x3c/li\x3e";b(".siel-trade-in-popup-option__list--size-type").html(d);setTimeout(function(){window.sg.components.sielTradeInPopup.resizePopup();window.sg.components.sielTradeInPopup.goScroll(2)},500)}}else if(d=
"",0<e[h].brand.length){a=e[h].brand.split(",");c=[];c=a;for(a=0;a<c.length;a++)d+='\x3cli class\x3d"siel-trade-in-popup-option__item" role\x3d"listitem"\x3e\x3cdiv class\x3d"siel-trade-in-popup-selector"\x3e\x3cinput class\x3d"hidden" type\x3d"radio" name\x3d"brand-type" id\x3d"brand-type-'+a+'" value\x3d"'+c[a]+'"\x3e\x3clabel class\x3d"siel-trade-in-popup-selector__label" for\x3d"brand-type-'+a+'"\x3e\x3cspan class\x3d"siel-trade-in-popup-selector__text-wrap"\x3e\x3cspan class\x3d"siel-trade-in-popup-selector__text"\x3e'+
c[a]+"\x3c/span\x3e\x3c/span\x3e\x3c/label\x3e\x3c/div\x3e\x3c/li\x3e";b(".siel-trade-in-popup-option__list--brand-type").html(d);setTimeout(function(){window.sg.components.sielTradeInPopup.resizePopup();window.sg.components.sielTradeInPopup.goScroll(3)},500)}if("size-type"==b(this).attr("name")&&(t=!1,b(this).prop("checked")&&(z=b(this).val()),d=q="",0<e[h].brand.length)){a=e[h].brand.split(",");c=[];c=a;for(a=0;a<c.length;a++)d+='\x3cli class\x3d"siel-trade-in-popup-option__item" role\x3d"listitem"\x3e\x3cdiv class\x3d"siel-trade-in-popup-selector"\x3e\x3cinput class\x3d"hidden" type\x3d"radio" name\x3d"brand-type" id\x3d"brand-type-'+
a+'" value\x3d"'+c[a]+'"\x3e\x3clabel class\x3d"siel-trade-in-popup-selector__label" for\x3d"brand-type-'+a+'"\x3e\x3cspan class\x3d"siel-trade-in-popup-selector__text-wrap"\x3e\x3cspan class\x3d"siel-trade-in-popup-selector__text"\x3e'+c[a]+"\x3c/span\x3e\x3c/span\x3e\x3c/label\x3e\x3c/div\x3e\x3c/li\x3e";b(".siel-trade-in-popup-option__list--brand-type").html(d);setTimeout(function(){window.sg.components.sielTradeInPopup.resizePopup();window.sg.components.sielTradeInPopup.goScroll(3)},500)}if("brand-type"==
b(this).attr("name")){d=[];b(this).prop("checked")&&(q=b(this).val());if(r){t=x&&z?!0:!1;c=e[h][x];var g=e[h][z],l=e[h][q];for(a=0;a<c.length;a++)for(var k=0;k<g.length;k++)if(c[a]==g[k])for(var n=0;n<l.length;n++)g[k]==l[n]&&(D=l[n],d.push(D))}else for(t=x?!0:!1,c=e[h][x],l=e[h][q],a=0;a<c.length;a++)for(k=0;k<l.length;k++)c[a]==l[k]&&(D=l[k],d.push(D));c=d[0].estimated_discount.max_exchange_value.total.amount;for(a=g=0;a<d.length;a++)0<a&&c<d[a].estimated_discount.max_exchange_value.total.amount&&
(c=d[a].estimated_discount.max_exchange_value.total.amount,g=a);f=d[g];setTimeout(function(){window.sg.components.sielTradeInPopup.resizePopup();window.sg.components.sielTradeInPopup.goScroll(4)},500);b("input[id\x3d'condition-radio-2']").click();a=p;r||"Average"!=p||(a="Average");t&&(a="Others"!=q?'\x3cspan style\x3d"color:#0381fe;"\x3e'+q+" "+f.name+"\x3c/span\x3e in "+a+" condition":'\x3cspan style\x3d"color:#0381fe;"\x3e '+f.name+"\x3c/span\x3e in "+a+" condition",b(".siel-trade-in-popup-offer__desc-product-info-text").html(a),
b("#condition-value-1").text("Value : \u20b9"+f.estimated_discount.max_exchange_value.total.amount),b("#condition-value-2").text("Value : \u20b9"+f.estimated_discount.mid_exchange_value.total.amount),b("#condition-value-3").text("Value : \u20b9"+f.estimated_discount.min_exchange_value.total.amount),r?b("#tv-disclaimer").text("- Exchange will be rejected if TV does not turn on or display has lines, blurred images or dead pixels."):b("#tv-disclaimer").text(""),d=a=0,"Excellent"==p?(a=f.estimated_discount.max_exchange_value.total.amount,
d=f.estimated_discount.max_exchange_value.exchange_discount.amount):"Good"==p?(a=f.estimated_discount.mid_exchange_value.total.amount,d=f.estimated_discount.mid_exchange_value.exchange_discount.amount):"Average"==p&&(a=f.estimated_discount.min_exchange_value.total.amount,d=f.estimated_discount.min_exchange_value.exchange_discount.amount),c="",0!=d&&(c="(Includes Rs "+d+" Bonus)"),a='\x3cstrong\x3eGet Upto \x3cspan style\x3d"color:#0381fe;"\x3eRs '+a+"\x3c/span\x3e for your exchange \x3c/strong\x3e"+
c+"\x3cbr\x3ePickup and Payment will be done by \x3cstrong\x3e"+f.partner+"\x3c/strong\x3e post inspection of your product.",b(".siel-trade-in-popup-offer__desc-value-provided").html(a))}r?x&&q&&z?b(".siel-trade-in-popup__btn-order").removeClass("cta--disabled"):b(".siel-trade-in-popup__btn-order").addClass("cta--disabled"):x&&q?b(".siel-trade-in-popup__btn-order").removeClass("cta--disabled"):b(".siel-trade-in-popup__btn-order").addClass("cta--disabled");H()});b(document).on("click","input[id^\x3d'condition-radio-']",
function(){b("input[id^\x3d'condition-radio-']").parent().removeClass("active");b("input[id^\x3d'condition-radio-']").prop("checked",!1);b("p.siel-trade-in-popup-option__condition-check-level").children("span").removeAttr("style");b(this).prop("checked",!0);b(this).parent().addClass("active");b(this).parent().parent().siblings().find("span").css("font-weight","bold");b(this).parent().parent().siblings().find(".condition-value").css("color","#2189ff");p=b(this).val();v=Granite.I18n.get(w+"_"+p+"_Text");
b(".siel-trade-in-popup-option__condition-check-desc-excellent").text(v);b(".siel-trade-in-popup-option__condition-check-desc-good").text(v);b(".siel-trade-in-popup-option__condition-check-desc-average").text(v);var a=p;r||"Average"!=p||(a="Average");a="Others"!=q?'\x3cspan style\x3d"color:#0381fe;"\x3e'+q+" "+f.name+"\x3c/span\x3e in "+a+" condition":'\x3cspan style\x3d"color:#0381fe;"\x3e '+f.name+"\x3c/span\x3e in "+a+" condition";b(".siel-trade-in-popup-offer__desc-product-info-text").html(a);
var d=a=0;"Excellent"==p?(a=f.estimated_discount.max_exchange_value.total.amount,d=f.estimated_discount.max_exchange_value.exchange_discount.amount):"Good"==p?(a=f.estimated_discount.mid_exchange_value.total.amount,d=f.estimated_discount.mid_exchange_value.exchange_discount.amount):"Average"==p&&(a=f.estimated_discount.min_exchange_value.total.amount,d=f.estimated_discount.min_exchange_value.exchange_discount.amount);var c="";0!=d&&(c="(Includes Rs "+d+" Bonus)");a='\x3cstrong\x3eGet Upto \x3cspan style\x3d"color:#0381fe;"\x3eRs '+
a+"\x3c/span\x3e for your exchange \x3c/strong\x3e"+c+"\x3cbr\x3ePickup and Payment will be done by \x3cstrong\x3e"+f.partner+"\x3c/strong\x3e post inspection of your product.";b(".siel-trade-in-popup-offer__desc-value-provided").html(a)});b(document).on("click",".siel-trade-in-popup__btn-wrap .cta--contained",function(){M()});sielTradeIn={initializeStep:k}})(window.jQuery);