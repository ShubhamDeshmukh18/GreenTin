var tradeinData={};
(function(P,b){function Z(){var a=l[0].offer_id,c=l[0].delayed_gratification;if(!1===c||!0===c){var g={sku:y};"undefined"!==typeof G&&""!==G&&(g.store_id=G);"true"===b("#isEppPage").val()&&(g.store_id=b("#eppCompanyCode").val());if("fr"===d){a=!1;"LEASE"===E&&(a=!0);for(var f=0;f<l.length;f++)if(l[f].is_finance_offer===a){g.offer_ids=[l[f].offer_id];break}if(null==g.offer_ids)return}else"ae"===d||"ae_ar"===d?g.offer_ids=[a]:g.offer_id=a;a=JSON.stringify(g);f="POST";var e="";"Y"===Q&&(f="GET",e=a=
"","fr"===d?g.offer_ids&&(e="/"+g.offer_ids[0]):g.offer_id&&(e="/"+g.offer_id),e="/"+y+e,"true"===b("#isEppPage").val()&&(e+="\x26store_id\x3d"+b("#eppCompanyCode").val()));b.ajax({headers:B,url:C+"/v1/exchange/device-offers"+e,type:f,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0,async:!0,data:a,success:function(a){if(null!=a){h={baseName:"",Samsung:[]};t={};var g=0;if(0<a.length)for(var e=0;e<a.length;e++)if(null!=a[e].brand){var f=a[e].brand;a[e].delayed_gratification=c;-1<f.toLowerCase().indexOf("samsung")?
(f="Samsung",h.Samsung.push(a[e])):(null==h[f]&&(h[f]=[],h.baseName=""===h.baseName?f:h.baseName+","+f),h[f].push(a[e]));if(("fr"===d||"de"===d)&&null!=a[e].category){null==t[a[e].category]&&(t[a[e].category]={});if(null==t[a[e].category].total||t[a[e].category].total<a[e].estimated_discount.total.amount)t[a[e].category].total=a[e].estimated_discount.total.amount;null==t[a[e].category][f]&&(t[a[e].category][f]="");null==h[f][a[e].category]&&(h[f][a[e].category]={})}if(null!=a[e].estimated_discount){f=
"fr"===d||"de"===d?h[f][a[e].category]:h[f];if(null==f.exchange_discount||f.exchange_discount<a[e].estimated_discount.exchange_discount.amount)f.exchange_discount=a[e].estimated_discount.exchange_discount.amount;if(null==f.exchange_value||f.exchange_value<a[e].estimated_discount.exchange_value.amount)f.exchange_value=a[e].estimated_discount.exchange_value.amount;if(null==f.total||f.total<a[e].estimated_discount.total.amount)f.total=a[e].estimated_discount.total.amount;"pl"===d||"uk"===d||"fr"===d||
"de"===d?g<a[e].estimated_discount.total.amount&&(g=a[e].estimated_discount.total.amount):g<a[e].estimated_discount.exchange_value.amount&&(g=a[e].estimated_discount.exchange_value.amount)}}n=[];0<h.baseName.length&&(n=h.baseName.split(","));n.sort();0<h.Samsung.length&&(n.unshift("Samsung"),h.baseName=n.join());if("fr"===d||"de"===d){a="";e=Object.keys(t);for(f=0;f<e.length;f++){var m=e[f];"Mobile Phone"===m&&(m="smartphone");a="de"===d?a+'\x3cli class\x3d"trade-in-popup__device-type-item trade-in-popup__device-type-item--with-icon"\x3e':
a+'\x3cli class\x3d"trade-in-popup__device-type-item"\x3e';a+='\t\x3cinput type\x3d"radio" id\x3d"device-type-'+f+'" name\x3d"device-type" class\x3d"trade-in-popup__device-type-item-input hidden" tradeType\x3d"'+e[f]+'" an-tr\x3d"header(pim)_trade in-'+u+'-text-device" an-ca\x3d"option click" an-ac\x3d"pd buying tool" an-la\x3d"trade-in:select device:'+m.toLowerCase()+'" data-modelname\x3d"'+p+'" data-modelcode\x3d"'+q+'"\x3e';a+='\t\x3clabel for\x3d"device-type-'+f+'" class\x3d"trade-in-popup__device-type-item-label"\x3e';
"de"===d&&(a+='\x3csvg class\x3d"icon" focusable\x3d"false"\x3e',a="Tablet"===m?a+'\t\x3cuse xlink:href\x3d"#icon-tablet" href\x3d"#icon-tablet"\x3e\x3c/use\x3e':"Smartphone mit Displaybruch"===m?a+'\t\x3cuse xlink:href\x3d"#icon-smartphone-crack" href\x3d"#icon-smartphone-crack"\x3e\x3c/use\x3e':"Tablet mit Displaybruch"===m?a+'\t\x3cuse xlink:href\x3d"#icon-tablet-crack" href\x3d"#icon-tablet-crack"\x3e\x3c/use\x3e':a+'\t\x3cuse xlink:href\x3d"#icon-smartphone" href\x3d"#icon-smartphone"\x3e\x3c/use\x3e',
a+="\x3c/svg\x3e");a+='\t\x3cspan class\x3d"trade-in-popup__device-type-item-label-text-wrap"\x3e';a+='\t\t\x3cspan class\x3d"trade-in-popup__device-type-item-label-name"\x3e'+Granite.I18n.get(m)+"\x3c/span\x3e";a+='\t\t\x3cspan class\x3d"trade-in-popup__device-type-item-label-price"\x3e';a+="\t\t\t\x3cspan\x3e"+Granite.I18n.get("Up to")+"\x3c/span\x3e";a+="\t\t\t\x3cem\x3e-"+currencyComma(t[e[f]].total,k)+"\x3c/em\x3e";a+="\t\t\x3c/span\x3e";a+="\t\x3c/span\x3e";a+="\t\x3c/label\x3e";a+="\x3c/li\x3e"}b(".trade-in-popup .trade-in-popup__brand-wrap .trade-in-popup__device-type-list").html(a)}else R();
a={};a.maxDiscount=g;a.flag=0<n.length?!0:!1;window.sg.components.dynamic.DetailAfterEvent.drawTradeInWithPopup(a)}},error:function(a){errLayerPop(a)}})}}function R(){var a="";if(0<h.baseName.length)for(var c=0;c<n.length;c++){var g="";if("fr"===d||"de"===d)if(g=b(".trade-in-popup .trade-in-popup__brand-wrap .trade-in-popup__device-type-list .trade-in-popup__device-type-item-input:checked").attr("tradeType"),null==t[g][n[c]])continue;"id"===d?(a+='\x3cli class\x3d"trade-in-popup__dropdown--select-item" brandName\x3d"'+
n[c]+'" an-tr\x3d"header(pim)_trade in-'+u+'-text-category" an-ca\x3d"option click" an-ac\x3d"pd buying tool" an-la\x3d"trade-in:select device:'+n[c].toLowerCase()+'" data-modelname\x3d"'+p+'" data-modelcode\x3d"'+q+'"\x3e',a+='\t\x3ca href\x3d"javascript:void(0);" role\x3d"option"\x3e',a+='\t\t\x3cspan class\x3d"trade-in-popup__dropdown--select-item-name"\x3e'+n[c]+"\x3c/span\x3e",a+="\t\x3c/a\x3e"):(a+='\x3cli class\x3d"trade-in-popup__brand-item"\x3e',a+='\t\x3cinput type\x3d"radio" id\x3d"brand-'+
c+'" name\x3d"brand" class\x3d"trade-in-popup__brand-item-input hidden" brandName\x3d"'+n[c]+'"an-tr\x3d"header(pim)_trade in-'+u+'-text-category" an-ca\x3d"option click" an-ac\x3d"pd buying tool" an-la\x3d"trade-in:select device:'+n[c].toLowerCase()+'" data-modelname\x3d"'+p+'" data-modelcode\x3d"'+q+'"\x3e',a+='\t\x3clabel for\x3d"brand-'+c+'" class\x3d"trade-in-popup__brand-item-label"\x3e',a+='\t\t\x3cspan class\x3d"trade-in-popup__brand-item-name"\x3e'+n[c]+"\x3c/span\x3e",a+='\t\t\x3cspan class\x3d"trade-in-popup__brand-item-price"\x3e',
a+="\t\t\x3cspan\x3e"+Granite.I18n.get("Up to")+"\x3c/span\x3e",a+="\t\t\t\x3cem\x3e-"+currencyComma("pl"===d||"uk"===d?h[n[c]].total:"fr"===d||"de"===d?h[n[c]][g].total:h[n[c]].exchange_value,k)+"\x3c/em\x3e",a+="\t\t\x3c/span\x3e",a+="\t\x3c/label\x3e");a+="\x3c/li\x3e"}"id"===d?(b(".trade-in-popup .trade-in-popup__brand-dropdown-wrap .scrollbar__contents").html(a),window.sg.components.tradeInPopup.bindDropdownEvent(),b(".trade-in-popup .trade-in-popup__model-dropdown-wrap .scrollbar__contents li:not(:first-child)").remove(),
window.sg.components.tradeInPopup.bindModelDropdownItemEvent()):b(".trade-in-popup .trade-in-popup__brand-wrap .trade-in-popup__brand-list").html(a);"fr"!==d&&"de"!==d||b(".trade-in-popup .trade-in-popup__brand-wrap .trade-in-popup__brand-list-title").show()}function S(a){for(var c="",g=0;g<h[a].length;g++){if("fr"===d||"de"===d){var e=b(".trade-in-popup .trade-in-popup__brand-wrap .trade-in-popup__device-type-list .trade-in-popup__device-type-item-input:checked").attr("tradeType");if(h[a][g].category!==
e)continue}e=h[a][g].estimated_discount;var m=0,l=0;null!=e&&(m="de"===d||"uk"===d||"fr"===d?e.total.amount:e.exchange_value.amount,l=e.exchange_discount.amount);"id"===d?(c+='\x3cli class\x3d"trade-in-popup__dropdown--select-item" modelIndex\x3d"'+g+'" an-tr\x3d"header(pim)_trade in-'+u+'-text-device model" an-ca\x3d"option click" an-ac\x3d"pd buying tool" an-la\x3d"trade-in:select device:'+a.toLowerCase()+":"+h[a][g].name.toLowerCase()+'" data-modelname\x3d"'+p+'" data-modelcode\x3d"'+q+'"\x3e',
c+='\t\x3ca href\x3d"javascript:void(0);" role\x3d"option"\x3e',c+='\t\t\x3cspan class\x3d"trade-in-popup__dropdown--select-item-name"\x3e'+h[a][g].name+"\x3c/span\x3e",c+='\t\t\x3cspan class\x3d"trade-in-popup__dropdown--select-item-price"\x3e'+Granite.I18n.get("Up to")+" "+currencyComma(m,k)+"\x3c/span\x3e",c+="\t\x3c/a\x3e"):(c+='\x3cli class\x3d"trade-in-popup__model-item"\x3e',c+='\t\x3cinput type\x3d"radio" id\x3d"model-'+g+'" name\x3d"model" class\x3d"trade-in-popup__model-item-input hidden" modelIndex\x3d"'+
g+'" an-tr\x3d"header(pim)_trade in-'+u+'-text-device model" an-ca\x3d"option click" an-ac\x3d"pd buying tool" an-la\x3d"trade-in:select device:'+a.toLowerCase()+":"+h[a][g].name.toLowerCase()+'" data-modelname\x3d"'+p+'" data-modelcode\x3d"'+q+'"\x3e',c+='\t\x3clabel for\x3d"model-'+g+'" class\x3d"trade-in-popup__model-item-label"\x3e',c+='\t\t\x3cspan class\x3d"trade-in-popup__model-item-name"\x3e'+h[a][g].name+"\x3c/span\x3e","pl"===d?(c+='\x3cspan class\x3d"trade-in-popup__model-item-price"\x3e',
c+='\t\x3cdiv class\x3d"trade-in-popup__model-item-price-inner"\x3e',c+="\t\t\x3cem\x3e-"+currencyComma(m,k)+"\x3c/em\x3e",c+="\t\x3c/div\x3e",c+='\t\x3cdiv class\x3d"trade-in-popup__model-item-price-inner"\x3e',c+="\t\t\x3cem\x3e-"+currencyComma(l,k)+"\x3c/em\x3e",c+="\t\x3c/div\x3e",c+="\x3c/span\x3e"):c="fr"===d?c+('\t\t\x3cspan class\x3d"trade-in-popup__model-item-price"\x3e\x3cem\x3e'+Granite.I18n.get("Up to")+" -"+currencyComma(m,k)+"\x3c/em\x3e\x3c/span\x3e"):D?c+('\t\t\x3cspan class\x3d"trade-in-popup__model-item-price"\x3e\x3cem\x3e-'+
currencyComma(m,k)+"*\x3c/em\x3e\x3c/span\x3e"):c+('\t\t\x3cspan class\x3d"trade-in-popup__model-item-price"\x3e\x3cem\x3e-'+currencyComma(m,k)+"\x3c/em\x3e\x3c/span\x3e"),c+="\t\x3c/label\x3e");c+="\x3c/li\x3e"}"id"===d?(b(".trade-in-popup .trade-in-popup__model-dropdown-wrap .scrollbar__contents li:not(:first-child)").remove(),b(".trade-in-popup .trade-in-popup__model-dropdown-wrap .scrollbar__contents").append(c),window.sg.components.tradeInPopup.bindModelDropdownItemEvent()):"pl"===d?b(".trade-in-popup .trade-in-popup__model-wrap .trade-in-popup__model-list.trade-in-popup__model-list--sepol").html(c):
b(".trade-in-popup .trade-in-popup__model-wrap .trade-in-popup__model-list").html(c)}function T(a){var c="";c="uk"===d?C+"/v1/exchange/questionnaires?category\x3d"+a.category:C+"/v1/exchange/get-questionnaire";b.ajax({headers:B,url:c,type:"GET",dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0,async:!0,success:function(a){if(null!=a){if("uk"===d)H[a.category]=a.category,A=null!=a.grade_factors?Object.keys(a.grade_factors):[],U(a);else{for(var c="",g=0;g<a.length;g++)c+=V(a[g],g);b(".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__condition-list").html(c)}window.sg.components.tradeInPopup.bindTooltipEvent()}},
error:function(a){errLayerPop(a)}})}function U(a){for(var c="",g=0;g<A.length;g++)null!=a.grade_factors[A[g]]&&(c+=V(a.grade_factors[A[g]],g));b(".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__condition-list").html(c)}function V(a,b){var c='\x3cli class\x3d"trade-in-popup__condition-list-item"\x3e';if("uk"===d){c+='\t\x3cp class\x3d"trade-in-popup__condition-list-item-option"\x3e'+a.display_text+"\x3c/p\x3e";c+='\t\x3cdiv class\x3d"trade-in-popup__condition-list-item-check-wrap"\x3e';
for(var e=0;e<a.possible_values.length;e++)c+='\t\t\x3cdiv class\x3d"trade-in-popup__condition-list-item-check"\x3e',c+='\t\t\t\x3cinput type\x3d"radio" id\x3d"inpRadio'+b+e+'" name\x3d"inpRadioName'+b+'" class\x3d"trade-in-popup__condition-list-item-check-input hidden" conditionVal\x3d'+a.possible_values[e]+"\x3e",c+='\t\t\t\x3clabel for\x3d"inpRadio'+b+e+'" class\x3d"trade-in-popup__condition-list-item-check-label"\x3e'+a.possible_values[e]+"\x3c/label\x3e",c+="\t\t\x3c/div\x3e";c+="\t\x3c/div\x3e"}else{c+=
'\t\x3cp class\x3d"trade-in-popup__condition-list-item-option"\x3e'+a.label+"\x3c/p\x3e";c+='\t\x3cdiv class\x3d"trade-in-popup__condition-list-item-check-wrap"\x3e';for(e=0;e<a.answer.length;e++)c+='\t\t\x3cdiv class\x3d"trade-in-popup__condition-list-item-check"\x3e',c+='\t\t\t\x3cinput type\x3d"radio" id\x3d"inpRadio'+b+e+'" name\x3d"inpRadioName'+b+'" class\x3d"trade-in-popup__condition-list-item-check-input hidden" conditionVal\x3d'+a.answer[e]+"\x3e",c+='\t\t\t\x3clabel for\x3d"inpRadio'+b+
e+'" class\x3d"trade-in-popup__condition-list-item-check-label"\x3e'+a.answer[e]+"\x3c/label\x3e",c+="\t\t\x3c/div\x3e";"fr"===d&&null!=a.hint&&(c=c+'\x3cdiv class\x3d"trade-in-popup__condition-list-item-tooltip"\x3e\t\x3cbutton type\x3d"button" class\x3d"trade-in-popup__condition-list-item-tooltip-btn"\x3e'+('\t\t\x3cspan class\x3d"blind"\x3e'+Granite.I18n.get("see what this means")+"\x3c/span\x3e"),c=c+'\t\x3c/button\x3e\t\x3cdiv class\x3d"trade-in-popup__condition-list-item-tooltip-box"\x3e\t\x3cspan class\x3d"trade-in-popup__condition-list-item-tooltip-box-arrow"\x3e\x3c/span\x3e'+
('\t\t\x3cp class\x3d"trade-in-popup__condition-list-item-tooltip-box-text"\x3e'+a.hint+"\x3c/p\x3e"),c+="\t\x3c/div\x3e\x3c/div\x3e");c+="\t\x3c/div\x3e";A.push(a.code)}return c+"\x3c/li\x3e"}function W(){var a=b(".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__condition-list-item-check-wrap").length,c=b(".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__condition-list-item-check-input:checked").length;if(D){if(b(".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__condition-list-item-check:last-child .trade-in-popup__condition-list-item-check-input:checked").length===
a){b(".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__condition-error").addClass("trade-in-popup__condition-error--show");b(".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__btn-continue").addClass("cta--disabled");return}b(".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__condition-error").removeClass("trade-in-popup__condition-error--show")}else if("fr"===d||"pl"===d){var g=b(".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__confirm-terms").find("input[type\x3d'checkbox']");
if(!F(g)){b(".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__btn-continue").addClass("cta--disabled");return}}a===c?(b(".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__btn-continue").removeClass("cta--disabled"),b(".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__btn-continue").attr("aria-disabled",!1)):b(".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__btn-continue").addClass("cta--disabled")}function X(){r=null;var a={};b(".trade-in-popup .trade-in-popup__apply-wrap .trade-in-popup__summary-product-wrap .trade-in-popup__summary-product-brand").html("");
b(".trade-in-popup .trade-in-popup__apply-wrap .trade-in-popup__summary-product-wrap .trade-in-popup__summary-product-model").html("");b(".trade-in-popup .trade-in-popup__apply-wrap .trade-in-popup__summary-product-wrap .trade-in-popup__summary-product-number").html("");b(".trade-in-popup .trade-in-popup__apply-wrap .trade-in-popup__summary-price-wrap .trade-in-popup__summary-price").html("");"id"===d?a={offer_id:l[0].offer_id,sku:y,postal_code:v}:"pl"===d||"de"===d?(a={device_info:{id:e.id},offer_id:l[0].offer_id,
sku:y},null!=e.memory&&(a.device_info.memory=e.memory)):a={device_id:e.id,offer_id:l[0].offer_id,sku:y};if(!I&&!D)if("Y"===J){null==a.device_info&&(a.device_info={});if(null!=e.category&&"Mobile Phone"===e.category||"fr"===d&&"Tablet"===e.category)a.device_info.imei=b("#imei-input").val();"de"===d&&(a.category=e.category,a.device_info.imei="Tablet"!==e.category&&"Tablet mit Displaybruch"!==e.category||null==e.tradein_device_id||""===e.tradein_device_id?b("#imei-input").val():e.tradein_device_id)}else null==
a.device_info&&(a.device_info={}),a.device_info.imei=b("#imei-input").val();"Y"===K&&("uk"===d?(a.device_condition={},b(".trade-in-popup__condition-list .is-checked").each(function(c){var d=b(this).attr("conditionVal");"false"===d?d=!1:"true"===d&&(d=!0);a.device_condition[A[c]]=d})):(null==a.device_info&&(a.device_info={}),a.device_info.state={},b(".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__condition-list-item-check-input:checked").each(function(c){var d=b(this).attr("conditionVal");
"false"===d?d=!1:"true"===d&&(d=!0);a.device_info.state[A[c]]=d})));"fr"===d&&(a.offer_id=e.offer_id,a.line_item_price={},a.line_item_price.amount=L,a.line_item_price.currency=k.toUpperCase(),a.purchase_type="PURCHASE",null!=E&&""!==E&&(a.purchase_type=E));b.ajax({headers:B,url:C+"/v1/exchange",type:"POST",dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0,async:!0,data:JSON.stringify(a),success:function(a){if(null!=a){if("id"!==d){null==a.device_info&&(a.device_info={});if(null==a.device_info.brand||
""===a.device_info.brand)a.device_info.brand=e.brand;if(null==a.device_info.name||""===a.device_info.name)a.device_info.name=e.name}r=a;var c=a.estimated_discount;b(".trade-in-popup .trade-in-popup__apply-wrap .trade-in-popup__summary-product-wrap .trade-in-popup__summary-product-brand").html(a.device_info.brand);b(".trade-in-popup .trade-in-popup__apply-wrap .trade-in-popup__summary-product-wrap .trade-in-popup__summary-product-model").html(a.device_info.name);var f='\x3cspan class\x3d"trade-in-popup__summary-price-title"\x3e'+
Granite.I18n.get("Trade-in discount")+"\x3c/span\x3e";if(null!=c&&""!==c){if("de"===d||"fr"===d){if("fr"===d){var m=(.78*Number(L)).toFixed(2);m<c.total.amount?b(".trade-in-popup .trade-in-popup__apply-wrap .trade-in-popup__summary-message-wrap .trade-in-popup__summary-message--error").html(Granite.I18n.get("This product cannot be discounted more than {0}",currencyComma(m,k),d)):b(".trade-in-popup .trade-in-popup__apply-wrap .trade-in-popup__summary-message-wrap .trade-in-popup__summary-message--error").html("")}m=
currencyComma(c.total.amount,k);f+='\x3cem class\x3d"trade-in-popup__summary-price"\x3e-'+m+" *\x3c/em\x3e"}else m="uk"===d||"id"===d?currencyComma(c.total.amount,k):currencyComma(c.exchange_value.amount,k),f+='\x3cem class\x3d"trade-in-popup__summary-price"\x3e-'+m+"\x3c/em\x3e";if("pl"===d)f=f+'\x3cspan class\x3d"trade-in-popup__summary-price-desc"\x3e'+('\x3ca href\x3d"https://www.samsung.com/pl/promocje/smartfony/odkup/" class\x3d"s-btn-text s-no-ico s-blue" target\x3d"_blank" title\x3d"'+Granite.I18n.get("Regular exchange discount")+
'"\x3e'+Granite.I18n.get("Nast\u0119pne kroki")+"\x3c/a\x3e"),f=f+'\x3c/span\x3e\x3cspan class\x3d"trade-in-popup__summary-price-desc"\x3e'+Granite.I18n.get("Additional discount"),f=f+'\x3c/span\x3e\x3cspan class\x3d"trade-in-popup__summary-price-desc"\x3e'+(" -"+currencyComma(c.exchange_discount.amount,cfCurrency)),f+="\x3c/span\x3e";else if("id"===d)f+='\x3cspan class\x3d"trade-in-popup__summary-price-desc"\x3e-'+currencyComma(c.exchange_value.amount,k)+" ("+Granite.I18n.get("Regular exchange discount")+
")\x3c/span\x3e",0!==c.exchange_discount.amount&&(f+='\x3cspan class\x3d"trade-in-popup__summary-price-desc"\x3e-'+currencyComma(c.exchange_discount.amount,k)+" ("+Granite.I18n.get("Additional exchange discount")+")\x3c/span\x3e");else if(!I&&"uk"!==d)if(!1===a.delayed_gratification){if("de"!==d||0===c.exchange_discount.amount||!0!==l[0].open_promo_tax)f+='\x3cspan class\x3d"trade-in-popup__summary-price-desc"\x3e('+Granite.I18n.get("Upfront discount")+")\x3c/span\x3e"}else D||(f+='\x3cspan class\x3d"trade-in-popup__summary-price-desc"\x3e('+
Granite.I18n.get("Cashback")+")\x3c/span\x3e")}"de"===d&&0!==c.exchange_discount.amount&&!0===l[0].open_promo_tax?(f+='\x3cspan class\x3d"trade-in-popup__summary-price-desc"\x3e'+Granite.I18n.get("Inkl. {0} Tauschpr\u00e4mie",currencyComma(c.exchange_discount.amount,k),d),f+=Granite.I18n.get("Direktabzug im Warenkorb")+"\x3c/span\x3e"):"fr"===d&&0!==c.exchange_discount.amount&&(f+='\x3cspan class\x3d"trade-in-popup__summary-price-desc"\x3e'+Granite.I18n.get("* Includes {0} contribution value",currencyComma(c.exchange_discount.amount,
k),d)+"\x3c/span\x3e");b(".trade-in-popup .trade-in-popup__apply-wrap .trade-in-popup__summary-price-wrap").html(f);b(".trade-in-popup .trade-in-popup__imei-wrap .text-field-v2.no-title").removeClass("error").addClass("success");a=b(".trade-in-popup .trade-in-popup__imei-wrap .trade-in-popup__confirm-terms").find("input[type\x3d'checkbox']");F(a)?(b(".trade-in-popup .trade-in-popup__imei-wrap .trade-in-popup__btn-continue").removeClass("cta--disabled"),b(".trade-in-popup .trade-in-popup__imei-wrap .trade-in-popup__btn-continue").attr("aria-disabled",
!1)):b(".trade-in-popup .trade-in-popup__imei-wrap .trade-in-popup__btn-continue").addClass("cta--disabled")}else w?(a=Granite.I18n.get("Invalid IMEI"),b(".trade-in-popup .trade-in-popup__imei-wrap .text-field-v2.no-title").removeClass("success").addClass("error"),b(".trade-in-popup .trade-in-popup__imei-wrap .text-field-v2.no-title .text-field-v2__text.error").text(a)):confirmPopup(Granite.I18n.get("Invalid IMEI")),b(".trade-in-popup .trade-in-popup__imei-wrap .trade-in-popup__btn-continue").addClass("cta--disabled")},
error:function(a){if(w){var c="";null!=a.responseJSON&&(a=a.responseJSON,null!=a.error&&"InvalidIMEI"===a.error&&(a.message=Granite.I18n.get("Invalid IMEI")),null!=a.message&&""!==a.message&&(c=a.message));""===c&&(c=Granite.I18n.get("We're sorry, an error occurred."));b(".trade-in-popup .trade-in-popup__imei-wrap .text-field-v2.no-title").removeClass("success").addClass("error");b(".trade-in-popup .trade-in-popup__imei-wrap .text-field-v2.no-title .text-field-v2__text.error").text(c)}else errLayerPop(a);
b(".trade-in-popup .trade-in-popup__imei-wrap .trade-in-popup__btn-continue").addClass("cta--disabled")},complete:function(a){b("#imei-input").removeClass("apiCall")}})}function M(a){var c="";a=x[a];if("model"===a)c=".trade-in-popup__model-wrap",S(b(".trade-in-popup .trade-in-popup__brand-wrap .trade-in-popup__brand-item-input:checked").attr("brandName")),b(".trade-in-popup .trade-in-popup__model-wrap .trade-in-popup__btn-continue").addClass("cta--disabled");else if("imei"===a)if(c=".trade-in-popup__imei-wrap",
"Y"===J&&null!=e.category&&(w="Mobile Phone"===e.category||"de"===d&&"Smartphone mit Displaybruch"===e.category||"de"===d&&"Tablet"===e.category&&(null==e.tradein_device_id||""===e.tradein_device_id)||"de"===d&&"Tablet mit Displaybruch"===e.category&&(null==e.tradein_device_id||""===e.tradein_device_id)||"fr"===d&&"Tablet"===e.category?!0:!1),b(".trade-in-popup .trade-in-popup__imei-wrap .trade-in-popup__confirm-terms-checkbox-input").prop("checked",!1),w)"id"!==d&&"fr"!==d&&(b(".trade-in-popup .trade-in-popup__imei-wrap .trade-in-popup__summary-product-brand").html(e.brand),
b(".trade-in-popup .trade-in-popup__imei-wrap .trade-in-popup__summary-product-model").html(e.name),a=e.estimated_discount.exchange_value.amount,D?b(".trade-in-popup .trade-in-popup__imei-wrap .trade-in-popup__summary-price-wrap .trade-in-popup__summary-price").html("-"+currencyComma(a,k)+"*"):"de"===d||"uk"===d?(a=e.estimated_discount.total.amount,b(".trade-in-popup .trade-in-popup__imei-wrap .trade-in-popup__summary-price-wrap .trade-in-popup__summary-price").html("-"+currencyComma(a,k)),"de"===
d&&!0===l[0].open_promo_tax&&0!==e.estimated_discount.exchange_discount.amount&&b(".trade-in-popup__imei-wrap .s-ly-step__imei .s-promotion-price").html(Granite.I18n.get("Inkl. {0} Tauschpr\u00e4mie",currencyComma(e.estimated_discount.exchange_discount.amount,k)))):b(".trade-in-popup .trade-in-popup__imei-wrap .trade-in-popup__summary-price-wrap .trade-in-popup__summary-price").html("-"+currencyComma(a,k))),b(".trade-in-popup .trade-in-popup__imei-wrap .text-field-v2.no-title").removeClass("error").removeClass("success").removeClass("active"),
b(".trade-in-popup .trade-in-popup__imei-wrap .trade-in-popup__btn-continue").addClass("cta--disabled"),b("#imei-input").val(""),r=null,"fr"===d?"Mobile Phone"===e.category?(b(".trade-in-popup .trade-in-popup__imei-wrap.shop-layer-title").html(Granite.I18n.get("Enter IMEI number of your old device")),b(".trade-in-popup .trade-in-popup__imei-wrap.s-ly-tradein__code-input .s-ly-tradein__code-title").html(Granite.I18n.get("Enter your IMEI")),b(".trade-in-popup .trade-in-popup__imei-wrap.s-ly-tradein__code-input .shop-input__label").html(Granite.I18n.get("IMEI number (15 digits)")),
b(".trade-in-popup .trade-in-popup__imei-wrap.s-ly-tradein__code-method .s-ly-tradein__code-method-list .s-method-txt:last").html(Granite.I18n.get("Go to Settings \x3e General \x3e About to display IMEI.")),b(".trade-in-popup .trade-in-popup__imei-wrap.s-ly-tradein__code .s-ly-tradein__code-input-inner button").hide()):(b(".trade-in-popup .trade-in-popup__imei-wrap.shop-layer-title").html(Granite.I18n.get("Enter IMEI number or serial number of your old device")),b(".trade-in-popup .trade-in-popup__imei-wrap.s-ly-tradein__code-input .s-ly-tradein__code-title").html(Granite.I18n.get("Enter your IMEI or serial number")),
b(".trade-in-popup .trade-in-popup__imei-wrap.s-ly-tradein__code-input .shop-input__label").html(Granite.I18n.get("IMEI number (15 digits) or serial number")),b(".trade-in-popup .trade-in-popup__imei-wrap.s-ly-tradein__code-method .s-ly-tradein__code-method-list .s-method-txt:last").html(Granite.I18n.get("Go to Settings \x3e General \x3e About to display IMEI or serial number.")),b(".trade-in-popup .trade-in-popup__imei-wrap.s-ly-tradein__code .s-ly-tradein__code-input-inner button").show()):b(".trade-in-popup .trade-in-popup__imei-wrap.s-ly-tradein__code .s-ly-tradein__code-input-inner button").hide();
else return M(x.indexOf(a)+1),!1;else if("condition"===a)if(c=".trade-in-popup__condition-wrap","Y"===K&&"uk"===d)b(".trade-in-popup__condition-list").html(""),null!=H[e.category]?U(H[e.category]):T(e);else if(0<b(".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__condition-list-item-check").length)b(".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__condition-error").removeClass("trade-in-popup__condition-error"),b(".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__condition-list-item-check-input").prop("checked",
!1),b(".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__btn-continue").addClass("cta--disabled"),b(".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__confirm-terms-checkbox-input").prop("checked",!1);else return M(x.indexOf(a)+1),!1;else"apply"===a&&(w||X(),c=".trade-in-popup__apply-wrap",b(".trade-in-popup .trade-in-popup__apply-wrap .trade-in-popup__confirm-terms-checkbox-input").prop("checked",!1),a=b(".trade-in-popup .trade-in-popup__apply-wrap .trade-in-popup__confirm-terms").find("input[type\x3d'checkbox']"),
F(a)?(b(".trade-in-popup .trade-in-popup__apply-wrap .trade-in-popup__btn-apply").removeClass("cta--disabled"),b(".trade-in-popup .trade-in-popup__apply-wrap .trade-in-popup__btn-apply").attr("aria-disabled",!1)):b(".trade-in-popup .trade-in-popup__apply-wrap .trade-in-popup__btn-apply").addClass("cta--disabled"));window.sg.components.tradeInPopup.showStep(c);z++;N()}function O(a){var c="";a=x[a];if("zipcode"===a)c=".trade-in-popup__zipcode-wrap";else if("brand"===a)c=".trade-in-popup__brand-wrap";
else if("model"===a)c=".trade-in-popup__model-wrap";else if("imei"===a){if(c=".trade-in-popup__imei-wrap","Y"===J&&null!=e.category&&(w="Mobile Phone"===e.category||"de"===d&&"Smartphone mit Displaybruch"===e.category||"de"===d&&"Tablet"===e.category&&(null==e.tradein_device_id||""===e.tradein_device_id)||"de"===d&&"Tablet mit Displaybruch"===e.category&&(null==e.tradein_device_id||""===e.tradein_device_id)||"fr"===d&&"Tablet"===e.category?!0:!1),!w)return O(x.indexOf(a)-1),!1}else if("condition"===
a&&(c=".trade-in-popup__condition-wrap",1>b(".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__condition-list-item-check").length))return O(x.indexOf(a)-1),!1;window.sg.components.tradeInPopup.showStep(c);z--;N()}function F(a){var c=!0;0<a.length&&a.each(function(){var a=b(this);a.prop("required")&&(c=c&&a.is(":checked"))});return c}function aa(){var a=b(".trade-in-popup .trade-in-popup__zipcode-wrap .trade-in-popup__imei-form-wrap");null!=v&&""!==v&&(Y=5<v.length||5>v.length?!1:!0);
if(Y){var c={sku:y,postal_code:v};"true"===b("#isEppPage").val()&&(c.store_id=b("#eppCompanyCode").val());c=JSON.stringify(c);var d="",e="POST";"Y"===Q&&(e="GET",c="",d="/"+y+"?postal_code\x3d"+v,"true"===b("#isEppPage").val()&&(d+="\x26store_id\x3d"+b("#eppCompanyCode").val()));b.ajax({headers:B,url:C+"/v1/exchange/offers"+d,type:e,dataType:"json",data:c,xhrFields:{withCredentials:!0},async:!0,success:function(c){null!=c&&""!==c&&0<c.length?(l=c,a.find(".text-field-v2.no-title").removeClass("error").addClass("success"),
b(".trade-in-popup .trade-in-popup__zipcode-wrap .trade-in-popup__btn-continue").removeClass("cta--disabled"),b(".trade-in-popup .trade-in-popup__zipcode-wrap .trade-in-popup__btn-continue").attr("aria-disabled",!1)):(a.find(".text-field-v2.no-title").removeClass("success").addClass("error"),b(".trade-in-popup .trade-in-popup__zipcode-wrap .trade-in-popup__btn-continue").addClass("cta--disabled"),a.find(".text-field-v2__text.error").html(Granite.I18n.get("Trade-in is not available at your zipcode.")))},
error:function(b){a.find(".text-field-v2.no-title").removeClass("success").addClass("error");var c=Granite.I18n.get("We're sorry, an error occurred.");null!=b.responseJSON&&(b=b.responseJSON,null!=b.message&&""!==b.message&&(c=b.message));a.find(".text-field-v2__text.error").html(c)}})}else a.find(".text-field-v2.no-title").removeClass("success").addClass("error"),b(".trade-in-popup .trade-in-popup__zipcode-wrap .trade-in-popup__btn-continue").addClass("cta--disabled"),a.find(".text-field-v2__text.error").html(Granite.I18n.get("Please enter your Zipcode"))}
function ba(a){a={display:a};"true"===b("#isEppPage").val()&&(a.store_id=b("#eppCompanyCode").val());b.ajax({headers:B,url:C+"/v1/tnc",type:"GET",dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0,async:!0,data:a,success:function(a){if(null!=a&&0<a.length){for(var c="",e=!1,h=0,l=0;l<a.length;l++){var k=a[l].data;if(null!=k&&!0===k.is_active)if(k.read_only)c+='\t\x3cdiv class\x3d"trade-in-popup__confirm-terms-desc"\x3e'+k.content+"\x3c/div\x3e";else{var n=a[l].id,p=k.is_required?"required":
"",q=k.is_required?"is-required":"";""!==p&&(e=!0);c+='\x3cdiv class\x3d"trade-in-popup__confirm-terms-checkbox-wrap '+q+'"\x3e';c+='\t\x3cdiv class\x3d"checkbox-v2"\x3e';c+='\t\x3cinput type\x3d"checkbox" name\x3d"checkbox" class\x3d"hidden" id\x3d"'+k.display_context[0]+h+'" data-id\x3d"'+n+'" name\x3d"'+k.display_context[0]+h+'" '+p+"\x3e";c+='\t\t\x3clabel class\x3d"checkbox-v2__label" for\x3d"'+k.display_context[0]+h+'"\x3e';c+='\t\t\t\x3cspan class\x3d"checkbox-v2__label-box-wrap"\x3e';c+='\t\t\t\t\x3cspan class\x3d"checkbox-v2__label-box"\x3e';
c+='\t\t\t\t\t\x3csvg class\x3d"checkbox-v2__label-box-icon" focusable\x3d"false"\x3e';c+='\t\t\t\t\t\t\x3cuse xlink:href\x3d"#done-bold" href\x3d"#done-bold"\x3e\x3c/use\x3e';c+="\t\t\t\t\t\x3c/svg\x3e";c+="\t\t\t\t\x3c/span\x3e";c+="\t\t\t\x3c/span\x3e";c+='\t\t\t\x3cspan class\x3d"checkbox-v2__label-text"\x3e'+k.content+"\x3c/span\x3e";c+="\t\t\x3c/label\x3e";c+="\t\x3c/div\x3e";c+="\x3c/div\x3e";h++}}e&&(c+='\x3cp class\x3d"trade-in-popup__confirm-terms-required-field"\x3e'+Granite.I18n.get("* Required field")+
"\x3c/p\x3e");"trade_in_imei"===a[0].data.display_context[0]?b(".trade-in-popup .trade-in-popup__imei-wrap .trade-in-popup__confirm-terms").html(c):"trade_in_condition"===a[0].data.display_context[0]?b(".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__confirm-terms").html(c):(a="",0<c.length&&(a+='\x3cstrong class\x3d"trade-in-popup__confirm-terms-title"\x3e'+Granite.I18n.get("Confirm Terms and Conditions")+"\x3c/strong\x3e",a+=c),b(".trade-in-popup .trade-in-popup__apply-wrap .trade-in-popup__confirm-terms").html(a));
"de"===d&&(""===b(".trade-in-popup .trade-in-popup__imei-wrap .trade-in-popup__confirm-terms").html().trim()&&b(".trade-in-popup .trade-in-popup__imei-wrap .trade-in-popup__confirm-terms").hide(),""===b(".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__confirm-terms").html().trim()&&b(".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__confirm-terms").hide(),""===b(".trade-in-popup .trade-in-popup__apply-wrap .trade-in-popup__confirm-terms").html().trim()&&b(".trade-in-popup .trade-in-popup__apply-wrap .trade-in-popup__confirm-terms").hide())}},
error:function(a){}})}function N(){b(".trade-in-popup .trade-in-popup__close").filter(":visible").attr("an-tr","header(pim)_trade in-"+u+"-cta-button").attr("an-ca","option click").attr("an-ac","pd buying tool").attr("an-la","trade in:step"+z+":close").attr("data-modelname",p).attr("data-modelcode",q);b(".trade-in-popup .trade-in-popup__btn-close").filter(":visible").attr("an-tr","header(pim)_trade in-"+u+"-cta-button").attr("an-ca","option click").attr("an-ac","pd buying tool").attr("an-la","trade in:step"+
z+":close").attr("data-modelname",p).attr("data-modelcode",q);b(".trade-in-popup .trade-in-popup__btn-back").filter(":visible").attr("an-tr","header(pim)_trade in-"+u+"-cta-button").attr("an-ca","option click").attr("an-ac","pd buying tool").attr("an-la","trade in:step"+z+":back").attr("data-modelname",p).attr("data-modelcode",q);b(".trade-in-popup .trade-in-popup__btn-continue").filter(":visible").attr("an-tr","header(pim)_trade in-"+u+"-cta-button").attr("an-ca","option click").attr("an-ac","pd buying tool").attr("an-la",
"trade in:step"+z+":continue").attr("data-modelname",p).attr("data-modelcode",q);b(".trade-in-popup .trade-in-popup__btn-apply").filter(":visible").attr("an-tr","header(pim)_trade in-"+u+"-cta-button").attr("an-ca","option click").attr("an-ac","pd buying tool").attr("an-la","trade in:step"+z+":apply trade-in").attr("data-modelname",p).attr("data-modelcode",q)}var d=b("#siteCode").val(),C=b("#storeDomain").val(),x=[],G=b("#companyCode").val(),k=b("#priceCurrency").val(),Q=b("#gpvGetTypeCheck").val(),
Y=!1,h={},l=[],y="",v="",e=null,t={},E="",n=[],w=!0,u=digitalData.page.pageInfo.pageTrack.toLowerCase(),K=b("#cfTradeInConditionCheckYn").val(),J=b("#cfTradeInCategoryUseYn").val(),H={},A=[],L=0,p="",q="",I=!1;if("lt"===d||"lv"===d||"ee"===d)I=!0,w=!1;var D=!1;if("nl"===d||"be"===d||"be_fr"===d)D=!0,w=!1;P=b("#multiLanguageYn").val();var ca=b("#localLang").val(),B={"Cache-Control":"no-cache","Content-Type":"application/json","Access-Control-Allow-Origin":"*"};"Y"===P&&(B["x-ecom-locale"]=ca);var z=
1,r=null;b(document).on("click",".trade-in-popup .trade-in-popup__brand-dropdown-wrap .trade-in-popup__dropdown--select-item",function(){S(b(this).attr("brandname"))});b(document).on("click",".trade-in-popup .trade-in-popup__brand-wrap .trade-in-popup__device-type-item-input",function(a){R();b(".trade-in-popup .trade-in-popup__brand-wrap .trade-in-popup__btn-continue").addClass("cta--disabled")});b(document).on("click",".trade-in-popup .trade-in-popup__brand-wrap .trade-in-popup__brand-item-input",
function(a){b(".trade-in-popup .trade-in-popup__brand-wrap .trade-in-popup__btn-continue").removeClass("cta--disabled");b(".trade-in-popup .trade-in-popup__brand-wrap .trade-in-popup__btn-continue").attr("aria-disabled",!1)});b(document).on("click",".trade-in-popup .trade-in-popup__model-wrap .trade-in-popup__model-list .trade-in-popup__model-item-input",function(a){b(".trade-in-popup .trade-in-popup__model-wrap .trade-in-popup__btn-continue").removeClass("cta--disabled");b(".trade-in-popup .trade-in-popup__model-wrap .trade-in-popup__btn-continue").attr("aria-disabled",
!1)});b(document).on("click",".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__condition-list-item-check-input",function(){W()});b(document).on("click",".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__confirm-terms input[type\x3dcheckbox]",function(){W()});b(document).on("keyup","#imei-input",function(a){if(!b("#imei-input").hasClass("apiCall")&&("fr"!==d||"fr"===d&&"Tablet"!==e.category||"fr"===d&&"Tablet"===e.category&&13===a.keyCode)){b("#imei-input").addClass("apiCall");
a="";var c=b("#imei-input").val();if(""===c)a=Granite.I18n.get("IMEI is required.");else if("fr"!==d||"fr"===d&&"Mobile Phone"===e.category)/^[0-9]*$/.test(c)||"id"===d?15!==c.length&&(a=Granite.I18n.get("IMEI must be 15 characters.")):a=Granite.I18n.get("Invalid IMEI");""!==a?(b("#imei-input").removeClass("apiCall"),b(".trade-in-popup .trade-in-popup__imei-wrap .text-field-v2.no-title").removeClass("success").addClass("error"),b(".trade-in-popup .trade-in-popup__imei-wrap .text-field-v2.no-title .text-field-v2__text.error").text(a),
b(".trade-in-popup .trade-in-popup__imei-wrap .trade-in-popup__btn-continue").addClass("cta--disabled")):X()}});b(document).on("click",".trade-in-popup .trade-in-popup__imei-wrap .trade-in-popup__confirm-terms input[type\x3dcheckbox]",function(){var a=b(".trade-in-popup .trade-in-popup__imei-wrap .trade-in-popup__confirm-terms").find("input[type\x3d'checkbox']");a=F(a);null!=r&&a?(b(".trade-in-popup .trade-in-popup__imei-wrap .trade-in-popup__btn-continue").removeClass("cta--disabled"),b(".trade-in-popup .trade-in-popup__imei-wrap .trade-in-popup__btn-continue").attr("aria-disabled",
!1)):b(".trade-in-popup .trade-in-popup__imei-wrap .trade-in-popup__btn-continue").addClass("cta--disabled")});b(document).on("click",".trade-in-popup .trade-in-popup__apply-wrap .trade-in-popup__confirm-terms input[type\x3dcheckbox]",function(){var a=b(".trade-in-popup .trade-in-popup__apply-wrap .trade-in-popup__confirm-terms").find("input[type\x3d'checkbox']");a=F(a);null!=r&&a?(b(".trade-in-popup .trade-in-popup__apply-wrap .trade-in-popup__btn-apply").removeClass("cta--disabled"),b(".trade-in-popup .trade-in-popup__apply-wrap .trade-in-popup__btn-apply").attr("aria-disabled",
!1)):b(".trade-in-popup .trade-in-popup__apply-wrap .trade-in-popup__btn-apply").addClass("cta--disabled")});b(document).on("click",".trade-in-popup .trade-in-popup__btn-continue:not(.cta--disabled)",function(a){a.preventDefault();var c=b(this).attr("stepName");a=x.indexOf(c)+1;if("model"===c&&"id"!==d){c=b(".trade-in-popup .trade-in-popup__brand-wrap .trade-in-popup__brand-item-input:checked").attr("brandName");var g=b(".trade-in-popup .trade-in-popup__model-wrap .trade-in-popup__model-item-input:checked").attr("modelIndex");
e=h[c][g]}M(a)});b(document).on("click",".trade-in-popup .trade-in-popup__btn-back",function(a){a.preventDefault();a=b(this).attr("stepName");a=x.indexOf(a)-1;O(a)});b(document).on("input","#zipcode-input",function(a){b(".trade-in-popup .trade-in-popup__zipcode-wrap .trade-in-popup__btn-continue").addClass("cta--disabled");a=b(this);a.val(a.val().replace(/[^0-9]/g,""))});b(document).on("keyup","#zipcode-input",function(a){v=b("#zipcode-input").val();13!==a.which&&5!==v.length||aa()});b(document).on("keypress",
"#zipcode-input",function(a){var c=b(this);b(".trade-in-popup .trade-in-popup__zipcode-wrap .trade-in-popup__btn-continue").addClass("cta--disabled");c.val(c.val().replace(/[^\d].+/,""));(48>a.which||57<a.which)&&a.preventDefault()});b(function(){if("uk"===d||"fr"===d||"be"===d||"be_fr"===d||"nl"===d||"de"===d||"pl"===d){b(".trade-in-popup .trade-in-popup__terms").html("");var a="fr"===d?["trade_in_condition","trade_in_imei","trade_in_confirm"]:["trade_in"];for(var c=0;c<a.length;c++)ba(a[c])}x="id"===
d?["zipcode","imei","apply"]:"lv"===d||"lt"===d||"ee"===d||"be"===d||"be_fr"===d||"nl"===d?["brand","model","condition","apply"]:"fr"===d?["brand","model","condition","imei","apply"]:["brand","model","imei","condition","apply"]});b(document).on("click",".trade-in-popup .trade-in-popup__btn-apply.cta--contained",function(){var a={};a.tradeinId=r.id;a.tradeinDiscountYn=r.delayed_gratification;a.displayBrandName=r.device_info.brand;a.displayModelName=r.device_info.name;a.open_promo_tax=null!=l[0].open_promo_tax?
l[0].open_promo_tax:"";a.discount={};a.discount.gratification=r.estimated_discount.exchange_discount.delayed_gratification;a.discount.price=r.estimated_discount.exchange_discount.amount;a.discount.total=r.estimated_discount.total.amount;a.value={};a.value.gratification=r.estimated_discount.exchange_value.delayed_gratification;a.value.price=r.estimated_discount.exchange_value.amount;a.promotion="";a.questionAndAnswer=[];a.tradeInAdditionalInfo="";if("uk"===d||"fr"===d||"be"===d||"be_fr"===d||"nl"===
d||"de"===d){a.consents=[];var c=b(".trade-in-popup .trade-in-popup__imei-wrap .trade-in-popup__confirm-terms").find("input[type\x3d'checkbox']");0<c.length&&c.each(function(){var c=b(this);c.is(":checked")&&a.consents.push(c.attr("data-id"))});c=b(".trade-in-popup .trade-in-popup__condition-wrap .trade-in-popup__confirm-terms").find("input[type\x3d'checkbox']");0<c.length&&c.each(function(){var c=b(this);c.is(":checked")&&a.consents.push(c.attr("data-id"))});c=b(".trade-in-popup .trade-in-popup__apply-wrap .trade-in-popup__confirm-terms").find("input[type\x3d'checkbox']");
0<c.length&&c.each(function(){var c=b(this);c.is(":checked")&&a.consents.push(c.attr("data-id"))})}a.tradeInType="";a.imeiKey="";window.sg.components.dynamic.DetailAfterEvent.offerAndAddonsDiscount(a,"tradein");window.sg.components.tradeInPopup.closePopup()});tradeinData={setTradein:function(a,c,e){p=digitalData.product.model_code;q=digitalData.product.model_name;null!=p&&(p=p.toLocaleLowerCase());null!=q&&(q=q.toLocaleLowerCase());l=a;y=b("#shopSKU").val();L=c;E=e;null!=l&&1>l.length?window.sg.components.dynamic.DetailAfterEvent.drawTradeInWithPopup({flag:!1}):
("fr"!==d&&"de"!==d||b(".trade-in-popup .trade-in-popup__brand-wrap .trade-in-popup__brand-list-title").hide(),b(".trade-in-popup__brand-wrap .trade-in-popup__sub-title").html(""),b(".trade-in-popup__model-wrap .trade-in-popup__sub-title").html(""),"de"===d&&0<l.length&&!0===l[0].open_promo_tax&&(b(".trade-in-popup__brand-wrap .trade-in-popup__sub-title").html(l[0].formatted_sales_pitch[0]),b(".trade-in-popup__model-wrap .trade-in-popup__sub-title").html(l[0].formatted_sales_pitch[0])),Z(),"Y"===
K&&"uk"!==d&&T())},showPopup:function(){"id"===d?(b("#zipcode-input").val(""),b(".trade-in-popup .trade-in-popup__zipcode-wrap .trade-in-popup__btn-continue").addClass("cta--disabled"),b(".trade-in-popup .trade-in-popup__zipcode-wrap .text-field-v2.no-title").removeClass("success").removeClass("error").removeClass("active")):(b(".trade-in-popup .trade-in-popup__brand-wrap .trade-in-popup__device-type-item .trade-in-popup__device-type-item-input").prop("checked",!1),b(".trade-in-popup .trade-in-popup__brand-wrap .trade-in-popup__brand-list .trade-in-popup__brand-item-input").prop("checked",
!1),b(".trade-in-popup .trade-in-popup__brand-wrap .trade-in-popup__btn-continue").addClass("cta--disabled"),"fr"!==d&&"de"!==d||b(".trade-in-popup .trade-in-popup__brand-wrap .trade-in-popup__brand-list").html(""));window.sg.components.tradeInPopup.init();window.sg.components.tradeInPopup.showPopup();"id"===d?window.sg.components.tradeInPopup.showStep(".trade-in-popup__zipcode-wrap"):window.sg.components.tradeInPopup.showStep(".trade-in-popup__brand-wrap");z=1;N()}}})(window,$);