(function(){function h(){d(e.section).target.forEach(function(a){b.instances.has(a)||new b(a)})}var d=window.sg.common.$q,g=window.sg.common.utils,e={section:".co70-hand-raiser",emailInput:'.co70-hand-raiser [data-js-action\x3d"emailCheck"] input',inputDeleteButton:".co70-hand-raiser .text-field-v2__input-icon.delete",nameInput:'.co70-hand-raiser [data-js-action\x3d"nameCheck"] input',phoneInput:'.co70-hand-raiser [data-js-action\x3d"phoneCheck"] input',tncCheckbox:'.co70-hand-raiser__tnc-checkbox .checkbox-v2 input[type\x3d"checkbox"]',
requiredTncCheckbox:'.co70-hand-raiser__tnc-checkbox.is-required .checkbox-v2 input[type\x3d"checkbox"]',requiredCheckboxWrap:".co70-hand-raiser__sub-headline-wrap.is-required + .co70-hand-raiser__input-checkbox",requiredRadioWrap:".co70-hand-raiser__sub-headline-wrap.is-required + .co70-hand-raiser__input-radio",requiredCheckbox:'.co70-hand-raiser__sub-headline-wrap.is-required + .co70-hand-raiser__input-checkbox input[type\x3d"checkbox"]',requiredRadio:'.co70-hand-raiser__sub-headline-wrap.is-required + .co70-hand-raiser__input-radio input[type\x3d"radio"]',
requiredShort:'.co70-hand-raiser__sub-headline-wrap.is-required + .co70-hand-raiser__input-short .text-field-v2 input[type\x3d"text"]',question:".co70-hand-raiser__input-wrap--question",submitCta:'.co70-hand-raiser [data-js-action\x3d"submitContents"] .cta',formContent:".co70-hand-raiser__full-form",form:".co70-hand-raiser form",recaptchaWrap:".co70-hand-raiser__recaptcha-wrap",popupCloseCta:".co70-hand-raiser__alert-popup .popup__close",popupDescWrap:".co70-hand-raiser__alert-popup .popup__desc"},
k=!1,l=!1,m="",f=document.querySelector("#siteCode")?document.querySelector("#siteCode").value:"",n="tw"===f?"https://china-handraiser-api-11260-stg.azurewebsites.net":"https://seao-handraiser-api-11260-stg.azurewebsites.net",p="https://handraiser-api.seasamsungcampaign.com/"+f,q=(window.location.hostname.includes("www.samsung.com")||window.location.hostname.includes("p6-qa.samsung.com")?p:n)+"/api/v1/HandraiserService";try{k=_ISDEVMODE}catch(a){}var b=function(a){this.els={window:d(window),section:d(a)};
this.handler={spaceCheck:this.spaceCheck.bind(this),requiredCheck:this.requiredCheck.bind(this),renderRecaptcha:this.renderRecaptcha.bind(this),setFormData:this.setFormData.bind(this),popupClose:this.popupClose.bind(this),getSitekey:this.getSitekey.bind(this),captchaErrorEvent:this.captchaErrorEvent.bind(this),textFieldInputCheck:this.textFieldInputCheck.bind(this)};this.recaptchaId=this.focusTarget=null;b.instances.set(a,this);this.init()};b.prototype.init=function(){this.setElements();this.setLocalSetting();
this.bindEvent()};b.prototype.setLocalSetting=function(){if("in"===f){var a=d(this.els.question.target[0]).find("div[data-js-action]");0<a.target.length&&"phoneCheck"===a.target[0].dataset.jsAction&&(a.target[0].dataset.jsLocal="inPhoneNumber");a=d(this.els.question.target[1]).find("div[data-js-action]");0<a.target.length&&"phoneCheck"===a.target[0].dataset.jsAction&&(a.target[0].dataset.jsLocal="inPinCode")}else if("hk"===f||"hk_en"===f)a=d(this.els.question.target[4]).find("div[data-js-action]"),
0<a.target.length&&"phoneCheck"===a.target[0].dataset.jsAction&&(a.target[0].dataset.jsLocal="hkPhoneNumber");this.setMaxlength();this.setErrorMessage()};b.prototype.setMaxlength=function(){"in"===f?(this.els.phoneInput.target.forEach(function(a){"inPinCode"===a.closest("div[data-js-action]").dataset.jsLocal?d(a).removeAttr("maxlength"):d(a).attr("maxlength","10")}),this.els.emailInput.attr("maxlength","200")):("hk"===f||"hk_en"===f)&&this.els.question.find('div[data-js-local\x3d"hkPhoneNumber"]').target[0]&&
d(this.els.question.find('div[data-js-local\x3d"hkPhoneNumber"] input')).target[0].attr("maxlength","13")};b.prototype.setErrorMessage=function(){"in"===f?(this.els.question.find('div[data-js-local\x3d"inPhoneNumber"]').target[0]&&(this.els.question.find('div[data-js-local\x3d"inPhoneNumber"] .text-field-v2__text.error').target[0].innerText=this.i18n("Invalid phone no.")),this.els.question.find('div[data-js-local\x3d"inPinCode"]').target[0]&&(this.els.question.find('div[data-js-local\x3d"inPinCode"] .text-field-v2__text.error').target[0].innerText=
this.i18n("Invalid pincode"))):"hk"!==f&&"hk_en"!==f||!this.els.question.find('div[data-js-local\x3d"hkPhoneNumber"]').target[0]||(this.els.question.find('div[data-js-local\x3d"hkPhoneNumber"] .text-field-v2__text.error').target[0].innerText=this.i18n("Invalid phone no."))};b.prototype.i18n=function(a){var b=a;"undefined"!==typeof Granite&&(b=Granite.I18n.get(a));return b};b.prototype.bindEvent=function(){this.els.emailInput.off("input",this.handler.textFieldInputCheck).on("input",this.handler.textFieldInputCheck);
this.els.nameInput.off("input",this.handler.textFieldInputCheck).on("input",this.handler.textFieldInputCheck);this.els.phoneInput.off("input",this.handler.textFieldInputCheck).on("input",this.handler.textFieldInputCheck);this.els.emailInput.off("blur",this.handler.spaceCheck).on("blur",this.handler.spaceCheck);this.els.nameInput.off("blur",this.handler.spaceCheck).on("blur",this.handler.spaceCheck);this.els.inputDeleteButton.off("click",this.handler.requiredCheck).on("click",this.handler.requiredCheck);
this.els.requiredTncCheckbox.off("input",this.handler.requiredCheck).on("input",this.handler.requiredCheck);this.els.requiredRadio.off("input",this.handler.requiredCheck).on("input",this.handler.requiredCheck);this.els.requiredCheckbox.off("input",this.handler.requiredCheck).on("input",this.handler.requiredCheck);if(0<this.els.recaptchaWrap.target.length&&"invalid-sitekey"!==this.getSitekey())this.els.window.off("load",this.handler.renderRecaptcha).on("load",this.handler.renderRecaptcha),l=!0;else this.els.submitCta.off("click",
this.handler.setFormData).on("click",this.handler.setFormData);this.els.popupCloseCta.off("click",this.handler.popupClose).on("click",this.handler.popupClose)};b.prototype.setElements=function(){this.els.emailInput=this.els.section.find(e.emailInput);this.els.inputDeleteButton=this.els.section.find(e.inputDeleteButton);this.els.nameInput=this.els.section.find(e.nameInput);this.els.phoneInput=this.els.section.find(e.phoneInput);this.els.tncCheckbox=this.els.section.find(e.tncCheckbox);this.els.requiredTncCheckbox=
this.els.section.find(e.requiredTncCheckbox);this.els.requiredCheckboxWrap=this.els.section.find(e.requiredCheckboxWrap);this.els.requiredRadioWrap=this.els.section.find(e.requiredRadioWrap);this.els.requiredRadio=this.els.section.find(e.requiredRadio);this.els.requiredCheckbox=this.els.section.find(e.requiredCheckbox);this.els.requiredShort=this.els.section.find(e.requiredShort);this.els.submitCta=this.els.section.find(e.submitCta);this.els.formContent=this.els.section.find(e.formContent);this.els.form=
this.els.section.find(e.form);this.els.question=this.els.section.find(e.question);this.els.recaptchaWrap=this.els.section.find(e.recaptchaWrap);this.els.popupCloseCta=this.els.section.find(e.popupCloseCta);this.els.popupDescWrap=this.els.section.find(e.popupDescWrap)};b.prototype.textFieldInputCheck=function(a){a=d(a.target);""===a.target[0].value?a.closest(".text-field-v2").removeClass("error"):this.inputStrCheck(a)?a.closest(".text-field-v2").removeClass("error"):(this.isSpace(a.target[0].value)&&
a.closest(".text-field-v2").addClass("delete"),a.closest(".text-field-v2").addClass("error"));this.requiredCheck()};b.prototype.inputStrCheck=function(a){var b=!1,c=a.target[0].value,d=a.target[0].closest("div[data-js-action]").dataset.jsLocal;switch(a.target[0].closest("div[data-js-action]").dataset.jsAction){case "emailCheck":b=this.isEmail(c)&&g.isEmail(c);break;case "nameCheck":b=this.isName(c)&&!this.isContainNum(c);break;case "phoneCheck":"inPhoneNumber"===d?b=g.isNumber(c)&&this.isStartWithSixToNine(c)&&
10===c.length:"inPinCode"===d?(c=c.trim(),6<c.length&&(c=c.slice(0,6)),a.target[0].value=c,b=g.isNumber(c)&&!this.isStartWithZero(c)):b="hkPhoneNumber"===d?g.isNumber(c)&&this.isStartWithOneOrFiveToNine(c):g.isNumber(c)}return b};b.prototype.spaceCheck=function(a){a=d(a.target);""!==a.target[0].value?this.isSpace(a.target[0].value)&&a.closest(".text-field-v2").addClass("active"):a.closest(".text-field-v2").removeClass("active")};b.prototype.isEmail=function(a){return/^\S+\.[a-zA-Z]{2,3}$/i.test(a)};
b.prototype.isSpace=function(a){return/^[\s]*$/.test(a)};b.prototype.isName=function(a){return/^([^\u00a3\s\u00a5\u20ac\u00a7\u203b\u2606\u2605\u25cb\u25cf\u25ce\u25c7\u25c6\u25a1\u25a0\u25b3\u25b2\u25bd\u25bc\u2192\u2190\u2190\u2191\u2193\u2194\u3013\u25c1\u25c0\u25b7\u25b6\u2664\u2660\u2661\u2665\u2667\u2663\u2299\u25c8\u25a3\u25d0\u25d1\u2592\u25a4\u25a5\u25a8\u25a7\u25a6\u25a9\u2668\u260f\u260e\u261c\u261e\u00b6\u2020\u2021\u2195\u2197\u2199\u2196\u2198\u266d\u2669\u266a\u266c\u327f{}\\[\]\\/?;:|),.*~`\\\u201c\\\u201d\\\u2018\\\u2019\\'\\"!^+<>@#$%&=\u00d7\u00f7\u20a9\u2022\u00b0\u00a4\u300a\u300b\u00a1\u00bf(\\\uD800-\uDFFF]+\s{0,1})*[^\u00a3\s\u00a5\u20ac\u00a7\u203b\u2606\u2605\u25cb\u25cf\u25ce\u25c7\u25c6\u25a1\u25a0\u25b3\u25b2\u25bd\u25bc\u2192\u2190\u2190\u2191\u2193\u2194\u3013\u25c1\u25c0\u25b7\u25b6\u2664\u2660\u2661\u2665\u2667\u2663\u2299\u25c8\u25a3\u25d0\u25d1\u2592\u25a4\u25a5\u25a8\u25a7\u25a6\u25a9\u2668\u260f\u260e\u261c\u261e\u00b6\u2020\u2021\u2195\u2197\u2199\u2196\u2198\u266d\u2669\u266a\u266c\u327f{}\\[\]\\/?;:|),.*~`\\\u201c\\\u201d\\\u2018\\\u2019\\'\\"!^+<>@#$%&=\u00d7\u00f7\u20a9\u2022\u00b0\u00a4\u300a\u300b\u00a1\u00bf(\\\uD800-\uDFFF]+$/.test(a)};
b.prototype.isContainNum=function(a){return/[0-9]/.test(a)};b.prototype.isStartWithZero=function(a){return/^0/.test(a)};b.prototype.isStartWithSixToNine=function(a){return/^[6-9]/.test(a)};b.prototype.isStartWithOneOrFiveToNine=function(a){return/^[1]|^[5-9]/.test(a)};b.prototype.requiredCheck=function(){var a=this.els.requiredTncCheckbox.target.length+this.els.requiredRadioWrap.target.length+this.els.requiredCheckboxWrap.target.length+this.els.requiredShort.target.length,b=this.els.section.find('.co70-hand-raiser__tnc-checkbox.is-required .checkbox-v2 input[type\x3d"checkbox"]:checked').target.length,
c=0,e=0,f=0;this.els.requiredRadioWrap.target.forEach(function(a){0<d(a).find('.radio-v2 input[type\x3d"radio"]:checked').target.length&&c++});this.els.requiredCheckboxWrap.target.forEach(function(a){0<d(a).find('.checkbox-v2 input[type\x3d"checkbox"]:checked').target.length&&e++});this.els.requiredShort.target.forEach(function(a){null===d(a).target[0].value||""===d(a).target[0].value||d(a).target[0].closest(".text-field-v2").classList.contains("error")||f++});a===b+c+e+f&&g.isEmail(this.els.emailInput.target[0].value)&&
!this.els.section.find(".text-field-v2.error").target[0]?(this.els.submitCta.removeAttr("disabled"),this.els.submitCta.removeClass("cta--disabled")):(this.els.submitCta.attr("disabled","true"),this.els.submitCta.addClass("cta--disabled"))};b.prototype.renderRecaptcha=function(){var a=this;this.recaptchaId=grecaptcha.render("HandRaiserRecaptcha",{sitekey:this.getSitekey(),size:"invisible",callback:window.sg.components.HandRaiser.handleSubmit,"error-callback":window.sg.components.HandRaiser.captchaErrorEvent});
this.els.submitCta.target[0].addEventListener("click",function(b){b.preventDefault();grecaptcha.execute(a.recaptchaId)})};b.prototype.captchaErrorEvent=function(){var a=this;this.els.submitCta.target[0].addEventListener("click",function(){a.popupOpen()})};b.prototype.getSitekey=function(){switch(f){case "tw":case "hk":case "hk_en":var a="6LdDmCopAAAAAMNAOzAiNGcrrbSTjeJJFdns1-B0";break;default:a="invalid-sitekey"}return a};b.prototype.getPrams=function(a){var b=new URLSearchParams(window.location.search);
if(b.get("cid")){if("cid"===a)return b.get("cid");if("channel"===a){switch(b.get("cid").split("_")[2].toUpperCase()){case "EMAIL":a="email";break;case "SOCIAL":a="social";break;case "PUSH":a="push";break;default:a="others"}return a}}else{if("cid"===a)return"";if("channel"===a)return"com"}};b.prototype.setFormData=function(a){var b=this.els.formContent,c={firstName:this.els.nameInput.target[0].value,lastName:this.els.nameInput.target[1].value,eMailAddress:this.els.emailInput.target[0].value};l?c.token=
m:a.preventDefault();this.els.section.find("#subsidiary").target[0]&&(c.subsidiary=this.els.section.find("#subsidiary").target[0].value);c.privacyPolicyYn=this.els.tncCheckbox.target[0].checked?"Y":"N";c.subscribeYn=this.els.tncCheckbox.target[1].checked?"Y":"N";c.cid=this.getPrams("cid");c.channel=this.getPrams("channel");this.els.section.find("#projectValue").target[0]&&(c.project=this.els.section.find("#projectValue").target[0].value);var e=[],f=0;this.els.question.target.forEach(function(a){if(d(a).find(".co70-hand-raiser__input-radio").target[0]){var b=
[];d(a).find('.radio-v2 input[type\x3d"radio"]').target.forEach(function(a,c){d(a).target[0].checked&&b.push("a"+(c+1))});f++;e.push({key:"q"+f,value:b})}else if(d(a).find(".co70-hand-raiser__input-checkbox").target[0]){var c=[];d(a).find('.checkbox-v2 input[type\x3d"checkbox"]').target.forEach(function(a,b){d(a).target[0].checked&&c.push("a"+(b+1))});f++;e.push({key:"q"+f,value:c})}else d(a).find(".text-field-v2__input").target[0]&&(f++,d(a).find(".text-field-v2__input").target[0].value?e.push({key:"q"+
f,value:[d(a).find(".text-field-v2__input").target[0].value]}):e.push({key:"q"+f,value:[]}))});c.surveys=JSON.stringify(e);c.countryCode=document.querySelector("#siteCode")?document.querySelector("#siteCode").value:"";k?(b.addClass("hide"),window.scrollTo({top:this.els.section.target[0].offsetTop})):this.submitContents(c)};b.prototype.submitContents=function(a){var b=this;this.els.submitCta.addClass("cta--disabled");this.els.submitCta.attr("disabled",!0);var c=this.els.formContent;a={method:"POST",
headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};return fetch(q,a).then(function(a){if(a.ok&&201===a.status)c.addClass("hide"),window.scrollTo({top:b.els.section.target[0].offsetTop});else{try{a.json()}catch(r){console.error(r)}b.popupOpen();b.els.submitCta.removeClass("cta--disabled");b.els.submitCta.removeAttr("disabled")}}).catch(function(){b.popupOpen();b.els.submitCta.removeClass("cta--disabled");b.els.submitCta.removeAttr("disabled")})};b.prototype.popupOpen=function(){this.focusTarget=
this.els.submitCta;window.sg.components.create(document.getElementById("handRaiserAlertPopup")).open(this.focusTarget);0<this.els.recaptchaWrap.target.length&&"invalid-sitekey"!==this.getSitekey()&&grecaptcha.reset(this.recaptchaId)};b.prototype.popupClose=function(){window.sg.components.create(document.getElementById("handRaiserAlertPopup")).close(this.focusTarget)};b.instances=new WeakMap;window.sg.components.HandRaiser={init:h,handleSubmit:function(a){m=a;window.sg.components.HandRaiser.setFormData();
return a},setFormData:function(){d(e.section).target.forEach(function(a){b.instances.get(a).setFormData()})},captchaErrorEvent:function(){d(e.section).target.forEach(function(a){b.instances.get(a).captchaErrorEvent()})}};d.ready(h)})();